(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(51)},37:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),i=a.n(c),o=(a(35),a(37),a(53)),s=a(56),l=a(44),u=a(15),m=a(6),p=a(27),f=a(16),h=a(7),d=["films","people","planets","species","starships","vehicles"],v="SWAPI_REQUEST",g="SWAPI_RESPONSE",b="SWAPI_SET_SEARCH",E={isFetching:!1,didInvalidate:!1,lastUpdate:null,searchStr:""},y=function(e){return function(t,a){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;switch(t.type+t.category){case v+a:return Object(h.a)({},e,{isFetching:!0});case g+a:return Object(h.a)({},e,t.payload,{isFetching:!1,lastUpdate:Date.now(),didInvalidate:!1});case b+a:return Object(h.a)({},e,{searchStr:t.payload});default:return e}}(t,a,e)}},j=Object(m.c)(d.reduce(function(e,t){return Object(h.a)({},e,Object(f.a)({},t,y(t)))},{})),O=Object(m.c)({swapiState:j}),k=[p.a],w=Object(m.d)(O,void 0,m.a.apply(void 0,k)),N=a(8),S=a(9),C=a(11),I=a(10),x=a(12),F=a(54),P=a(52),A=a(55),D=Object(A.a)(function(){return r.a.createElement("ul",{className:"nav nav-tabs"},d.map(function(e){return r.a.createElement("li",{className:"nav-item",key:e},r.a.createElement(P.a,{className:"nav-link",activeClassName:"active",to:"/".concat(e)},e[0].toUpperCase()+e.slice(1)))}))}),R=a(46),U=a(29),L=a(5),W=a.n(L),$=a(14),_={getList:function(){var e=Object($.a)(W.a.mark(function e(t,a,n){var r;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.entries({page:a,search:n}).filter(function(e){return e[1]}).map(function(e){return e.join("=")}).join("&"),e.next=3,fetch("https://swapi.co/api/"+t+"/?"+r).then(function(e){return e.json()},function(e){return{error:e}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}(),getItem:function(){var e=Object($.a)(W.a.mark(function e(t){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then(function(e){return e.json()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var a=Object($.a)(W.a.mark(function a(n,r){var c,i;return W.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n(B(e)),c=r().swapiState[e].searchStr,a.next=4,_.getList(e,t,c);case 4:i=a.sent,n(J(i,e,t));case 6:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()}function M(e){return function(t,a){(function(e){var t=e.isFetching,a=e.results,n=e.didInvalidate,r=e.lastUpdate;return!t&&(!a||!!(n||r<Date.now()-6e5))})(a().swapiState[e])&&t(T(e))}}function B(e){return{type:v,category:e}}function J(e,t,a){var n=e.results,r=Object(U.a)(e,["results"]);return Array.isArray(n)&&(n="films"===t?n.sort(function(e,t){return e.title>t.title}):n.sort(function(e,t){return e.name>t.name})),{type:g,category:t,payload:{pagination:Object(h.a)({},r,{page:a}),results:n}}}function H(e,t){return function(a){a(function(e,t){return{type:b,category:t,payload:e}}(e,t)),a(T(t))}}var Q={trottling:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=0;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];clearTimeout(a),a=setTimeout(function(){e.apply(void 0,r)},t)}}},q=(a(49),function(e){var t=e.dark,a=e.relative;return r.a.createElement("div",{className:"loading"+(t?" m-dark":"")+(a?" m-relative":"")},r.a.createElement("div",{className:"signal"}))}),z=function(e,t){for(var a=[],n=1;n<=t;n++)(n<=e&&n>e-10||n>=e&&n<e+10)&&a.push(n);return a},G=function(e){var t=e.pagination,a=e.loadPage,n=t.page,c=t.count,i=Math.ceil(c/10),o=z(n,i);return r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},1!==n&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(1)}},"First")),r.a.createElement("li",{className:"page-item d-none d-md-block".concat(1==n?" disabled":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(n-1)}},"Previous")),o[0]>1&&r.a.createElement("li",{className:"page-item d-none d-md-block disabled"},r.a.createElement("a",{className:"page-link",href:"#"},"...")),o.map(function(e){return r.a.createElement("li",{key:e,className:"page-item".concat(n===e?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(e)}},e))}),o[o.length-1]<i&&r.a.createElement("li",{className:"page-item d-none d-md-block disabled"},r.a.createElement("a",{className:"page-link",href:"#"},"...")),r.a.createElement("li",{className:"page-item d-none d-md-block".concat(n==i?" disabled":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(n+1)}},"Next")),n!=i&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(i)}},"Last"))))};var K=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(C.a)(this,Object(I.a)(t).call(this,e))).setSearch=function(e){var t=a.props.match.params.category,n=e.target.value;a.trottledDispatch(H(n,t))},a.loadPage=function(e){var t=a.props;(0,t.dispatch)(T(t.match.params.category,e))},a.trottledDispatch=Q.trottling(e.dispatch,400),a.searchRef=r.a.createRef(),a}return Object(x.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.updateItemsIfNeeded()}},{key:"componentDidUpdate",value:function(e){this.updateItemsIfNeeded();var t=e.match.params.category,a=this.props,n=a.match.params.category,r=a.searchStr;t!==n&&(this.searchRef.current.value=r)}},{key:"updateItemsIfNeeded",value:function(){var e=this.props;(0,e.dispatch)(M(e.match.params.category.toLowerCase()))}},{key:"render",value:function(){var e=this.props,t=e.isFetching,a=e.results,n=e.match.url,c=e.pagination;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Live search","aria-label":"",onChange:this.setSearch,ref:this.searchRef}),!t&&a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,a.map(function(e){var t=e.url.replace(/.*(\/\d+\/)$/,"$1"),a=e.name||e.title;return r.a.createElement("li",{key:e.url},r.a.createElement(R.a,{to:n+t},a))})),a.length>0&&r.a.createElement(G,{pagination:c,loadPage:this.loadPage})),t&&r.a.createElement(q,null))}}]),t}(n.Component),V=Object(u.b)(function(e,t){var a=t.match.params.category;return Object(h.a)({},e.swapiState[a.toLowerCase()])})(K),X=function(e){function t(e){var a;return Object(N.a)(this,t),(a=Object(C.a)(this,Object(I.a)(t).call(this,e))).state={isFetching:!0},a}return Object(x.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object($.a)(W.a.mark(function e(){var t;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getItem(this.props.path);case 2:(t=e.sent)&&this.setState({item:t,isFetching:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isFetching,a=e.item;return t?r.a.createElement(q,null):a.name||a.title}}]),t}(n.Component);function Y(e){return/https?:\/\//.test(e)?r.a.createElement(X,{path:e}):e}var Z=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.item;if(!e)return null;var t=Object.entries(e).filter(function(e){return!/created|edited|url/.test(e[0])});return r.a.createElement("dl",{className:"row"},t.map(function(e){return r.a.createElement(r.a.Fragment,{key:e[0]},r.a.createElement("dt",{className:"col-sm-3"},e[0][0].toUpperCase()+e[0].slice(1).replace("_"," ")),r.a.createElement("dd",{className:"col-sm-9"},Array.isArray(e[1])?e[1].map(function(e){return r.a.createElement("div",{key:e},Y(e))}):Y(e[1])))}))}}]),t}(n.Component),ee=Object(u.b)(function(e,t){var a=e.swapiState,n=t.match.params,r=n.category,c=n.id,i=a[r].results;return{item:i&&i.find(function(e){return e.url.replace(/.*\/(\d+)\/$/,"$1")==c})}})(Z),te=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(I.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=d.join("|");return r.a.createElement("div",{className:"container main-content"},r.a.createElement(D,null),r.a.createElement(s.a,null,r.a.createElement(l.a,{path:"/:category(".concat(e,")"),exact:!0,component:V}),r.a.createElement(l.a,{path:"/:category(".concat(e,")/:id(\\d+)"),component:ee}),r.a.createElement(F.a,{to:"/films"})))}}]),t}(n.Component),ae=function(){return r.a.createElement(u.a,{store:w},r.a.createElement(o.a,null,r.a.createElement(s.a,null,r.a.createElement(l.a,{path:"/",component:te}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,2,1]]]);
//# sourceMappingURL=main.b4760036.chunk.js.map